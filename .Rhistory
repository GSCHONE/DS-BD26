library(shiny); runApp('C:/Users/luffy/Desktop/Projet datascience/DS-BD26/Appli shiny.R')
library(RSQLite)
setwd("~/")
setwd("C:\Users\luffy\Desktop\Projet datascience\DS-BD26")
setwd("C:/Users/luffy/Desktop/Projet datascience/DS-BD26")
install.packages("RSQLite")
install.packages("tidyverse")
install.packages("lubridate")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("lubridate")
library(RSQLite)
library(tidyverse)
library(lubridate)
library(RSQLite)
library(tidyverse)
library(lubridate)
###https://www.kaggle.com/datasets/hugomathien/soccer
#NB ATTENTION impossible à charger sur le GIT trop volumineux
#repertoirePerso pour les données volumineuses REP
rep= "U:/DATASCIENCE/DS-BD26/"
file="database.sqlite"
conn <- dbConnect(RSQLite::SQLite(), paste0(rep,file))
setwd("C:/Users/luffy/Desktop/Projet datascience/DS-BD26")
rep= "C:/Users/luffy/Desktop/Projet datascience/DS-BD26/"
file="database.sqlite"
conn <- dbConnect(RSQLite::SQLite(), paste0(rep,file))
###RECUPERATION EN LOCAL DES TABLES
for (table in dbListTables(conn)){
tmp = dbGetQuery(conn, paste0("SELECT * FROM ",table))
write_rds(tmp,paste0(rep,table))
rm(tmp)
}
##GENERE EN LOCAL LES FICHIERS RDS POUR CHAQUE CHAMPIONNAT / PAS NECESSAIRE SI ON TRAVAILLE QUE SUR PREMIERE LEAGUE
# unique(Match$country_id)
# for (id_ in unique(Match$country_id)) {
#   Match %>% filter(country_id == id_) -> tmp
#   write_rds(tmp, paste0(rep, "Match", id_))
#   rm(tmp)
# }
#VERSION AVEC JUSTE PL
Match=read_rds(paste0(rep,"Match"))
conn <- dbConnect(RSQLite::SQLite(), paste0(rep,file))
###RECUPERATION EN LOCAL DES TABLES
for (table in dbListTables(conn)){
tmp = dbGetQuery(conn, paste0("SELECT * FROM ",table))
write_rds(tmp,paste0(rep,table))
rm(tmp)
}
View(conn)
dbListTables(conn)
paste0(rep,file)
View(conn)
View(DON_PLAYER)
View(Team)
View(Team_Attributes)
View(Team_Attributes_L)
View(ListMatch)
View(Match_PL)
View(Team)
table(unique(ListMatch$home_team_long_name))
name(table(unique(ListMatch$home_team_long_name)))
names(table(unique(ListMatch$home_team_long_name)))
library(shiny); runApp('Appli shiny.R')
View(Team_Attributes)
View(Team)
Team[where(Team$team_long_name %in% names(table(unique(ListMatch$home_team_long_name))))]
Team
Team[which(Team$team_long_name %in% names(table(unique(ListMatch$home_team_long_name))))]
Team[which(Team$team_long_name %in% names(table(unique(ListMatch$home_team_long_name))))]
Team[,which(Team$team_long_name %in% names(table(unique(ListMatch$home_team_long_name))))]
Team[which(Team$team_long_name %in% names(table(unique(ListMatch$home_team_long_name)))),]
Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name))))
library(tidyverse)
Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name))))
Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name)))) %>%
select(c(2:4))
table_transi=Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name)))) %>%
select(c(2:4))
table_transi=Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name)))) %>%
select(c(4:2))
table_transi
View(Team_Attributes_L)
table_transi=Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name)))) %>%
select(c(4,2))
View(table_transi)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
group_by(team_api_id)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
group_by(team_api_id) %>%
filter($Saison==max(.$Saison))
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
group_by(team_api_id) %>%
filter(.$Saison==max(.$Saison))
yolo=Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
group_by(team_api_id) #%>%
# filter(.$Saison==max(.$Saison))
View(yolo)
View(table_transi)
View(Team_Attributes_L)
unique(Team_Attributes_L$team_api_id %in% table_transi$team_api_id)
table(unique(Team_Attributes_L$team_api_id))
sum(table(unique(Team_Attributes_L$team_api_id)))
Team_Attributes_L$team_api_id %in% table_transi$team_api_id
unique(Team_Attributes_L$team_api_id) %in% table_transi$team_api_id
sum(unique(Team_Attributes_L$team_api_id) %in% table_transi$team_api_id)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id)
size(Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id))
dim(Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id))
Team_Attributes_L$team_api_id %in% table_transi$team_api_id
table_transi$team_api_id %in% Team_Attributes_L$team_api_id
sum(Team_Attributes_L$team_api_id %in% table_transi$team_api_id)
sum(Team_Attributes_L$team_api_id %in% table_transi$team_api_id)/34
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
group_by(team_api_id) %>%
filter(.$Saison=="2016/2017")
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(.$Saison=="2016/2017")
yolo= Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter($Saison=="2016/2017")
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter($Saison=="2016/2017")
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(.$Saison=="2016/2017")
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(.$Saison =="2016/2017")
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017")
View(table_transi)
table_transi=Team %>% filter(team_long_name %in% names(table(unique(ListMatch$home_team_long_name)))) %>%
select(c(4,2)) %>%
arrange(.$team_api_id)
View(table_transi)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id) %>%
mutate(table_transi$team_long_name)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id
)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id) %>%
right_join(table_transi, by=table_transi$team_api_id)
help(right_join)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id) %>%
right_join(.,table_transi, by=table_transi$team_api_id)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id) %>%
right_join(.,table_transi)
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id) %>%
right_join(table_transi,.)
rm(yolo)
table_attribut_team=
Team_Attributes_L %>% filter(team_api_id %in% table_transi$team_api_id) %>%
filter(Saison =="2016/2017") %>%
arrange(.$team_api_id) %>%
right_join(table_transi,.)
View(table_attribut_team)
View(Team)
View(DON_TEAM)
View(Player_L)
View(Player_Attributes_L)
View(Player_Attributes)
View(Team_Attributes)
View(DON_TEAM)
View(Player)
View(Player_Attributes)
View(XX)
View(Player_Attributes)
View(Player)
runApp('Appli shiny.R')
